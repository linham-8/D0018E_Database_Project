{% macro get_rarity_class(rarity) %}
{% if 'Contraband' in rarity %}bg-rarity-contraband
{% elif 'Covert' in rarity %}bg-rarity-covert
{% elif 'Classified' in rarity %}bg-rarity-classified
{% elif 'Restricted' in rarity %}bg-rarity-restricted
{% elif 'Mil-Spec' in rarity %}bg-rarity-milspec
{% elif 'Industrial' in rarity %}bg-rarity-industrial
{% else %}bg-rarity-common{% endif %}
{% endmacro %}

{% macro group_card(skin, current_phase) %}
<a href="{{ url_for_args('index', search=skin.name) }}"
    class="block aspect-square border border-gray-700 p-4 flex flex-col justify-between bg-gray-800 rounded-card hover:shadow-xl hover:border-accent transition-all relative group">

    <div class="absolute top-0 left-0 right-0 h-1 rounded-t-card opacity-80 {{ get_rarity_class(skin.rarity|string) }}">
    </div>

    <div class="flex-grow flex items-center justify-center mb-2 overflow-hidden">
        {% if skin.image %}
        <img src="{{ skin.image }}" alt="{{ skin.name }}"
            class="max-w-full max-h-full object-contain transform group-hover:scale-110 transition-transform duration-300">
        {% else %}
        <span class="text-gray-600 font-bold text-xs">No Image</span>
        {% endif %}
    </div>

    <div>
        <h3 class="text-xs font-bold truncate text-gray-200">{{ skin.name }}</h3>
        <div class="flex justify-between items-end mt-1">
            <span class="text-[10px] text-gray-400">{{ skin.count }} listings</span>
            <div class="text-right">
                <span class="text-[10px] text-gray-400 block leading-none">From</span>
                <span class="text-sm font-bold text-accent">{{ skin.min_price }}€</span>
            </div>
        </div>
    </div>
</a>
{% endmacro %}

{% macro skin_card(skin) %}
<div
    class="aspect-square border border-gray-700 p-4 flex flex-col justify-between bg-gray-800 rounded-card hover:shadow-lg transition-all relative group">
    <div class="absolute top-0 left-0 right-0 h-1 rounded-t-card opacity-80 {{ get_rarity_class(skin.rarity|string) }}">
    </div>
    <div class="flex-grow flex items-center justify-center border-b border-gray-700 mb-2 overflow-hidden relative">
        {% if skin.image %}
        <img src="{{ skin.image }}" alt="{{ skin.name }}"
            class="max-w-full max-h-full object-contain transform group-hover:scale-110 transition-transform duration-300">
        {% else %}
        <span class="text-gray-600 font-bold text-xs">No Image</span>
        {% endif %}
    </div>
    <div>
        <h3 class="text-xs font-bold truncate text-gray-200" title="{{ skin.name }}">{{ skin.name }}</h3>
        <div class="flex justify-between items-end mt-1">
            <span class="text-[10px] text-gray-400">{{ skin.wear_name }}</span>
            <div class="text-right">
                {% if skin.is_stattrak %}
                <span class="text-[9px] text-orange-500 font-bold block leading-none mb-1">StatTrak™</span>
                {% endif %}
                <span class="text-sm font-bold text-green-400">{{ skin.price }}€</span>
            </div>
        </div>
    </div>
</div>
{% endmacro %}

{% macro pagination_widget(pagination, endpoint) %}
<div class="flex justify-center items-center gap-4 mt-8 py-6 border-t border-gray-700">
    {% if pagination.has_prev %}
    <a href="{{ url_for(endpoint, page=pagination.prev_num, **request.args) }}"
        class="border border-gray-600 px-4 py-1 bg-gray-800 text-gray-300 rounded-btn hover:bg-gray-700 text-sm font-bold transition">Previous</a>
    {% endif %}
    <span class="text-gray-500 text-sm">Page {{ pagination.page }} of {{ pagination.pages }}</span>
    {% if pagination.has_next %}
    <a href="{{ url_for(endpoint, page=pagination.next_num, **request.args) }}"
        class="border border-gray-600 px-4 py-1 bg-gray-800 text-gray-300 rounded-btn hover:bg-gray-700 text-sm font-bold transition">Next</a>
    {% endif %}
</div>
{% endmacro %}